name = "tinykit-cdn"
main = "src/index.ts"
compatibility_date = "2025-01-20"

# R2 存储桶绑定
[[r2_buckets]]
binding = "CDN_BUCKET"
bucket_name = "tinykit"  # 生产环境的 bucket
#preview_bucket_name = "tinykit-dev"  # 开发环境的 bucket

# 自定义域名路由（部署后在 Cloudflare Dashboard 配置）
# cdn.tinykit.app/* -> this worker

# 环境变量（可选）
[vars]
ALLOWED_ORIGINS = "*"  # 允许的来源，生产环境建议设置具体域名
MAX_FILE_SIZE = "104857600"  # 100MB
#UPLOAD_ALLOWED_ORIGINS = ""  # 允许上传的来源
JWT_SECRETS = '{"file-sortify": "secret1", "video-app": "secret2", "hairstyle": "HNk7yNO1TMQeKzUxjnk4VEaZuc65O+0ATaPIhesVimc="}'  # 多应用JWT密钥映射，JSON格式（必配）

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true