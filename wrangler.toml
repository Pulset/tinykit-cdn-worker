name = "tinykit-cdn"
main = "src/index.ts"
compatibility_date = "2025-01-20"

# R2 存储桶绑定
[[r2_buckets]]
binding = "CDN_BUCKET"
bucket_name = "tinykit"  # 生产环境的 bucket
#preview_bucket_name = "tinykit-dev"  # 开发环境的 bucket

# 自定义域名路由（部署后在 Cloudflare Dashboard 配置）
# cdn.tinykit.app/* -> this worker

# 环境变量（可选）
[vars]
ALLOWED_ORIGINS = "*"  # 允许的来源，生产环境建议设置具体域名
MAX_FILE_SIZE = "104857600"  # 100MB
UPLOAD_SECRET = "your-secret-key-here"  # 上传API的安全密钥，请修改为强密码
UPLOAD_ALLOWED_ORIGINS = "localhost:3000,localhost:8080,admin.tinykit.app"  # 允许上传的来源

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true