name = "tinykit-cdn"
main = "src/index.ts"
compatibility_date = "2025-01-20"

# R2 存储桶绑定
[[r2_buckets]]
binding = "CDN_BUCKET"
bucket_name = "tinykit"  # 替换为你实际的 bucket 名称
remote = true

# 自定义域名路由（部署后在 Cloudflare Dashboard 配置）
# cdn.tinykit.app/* -> this worker

# 环境变量（可选）
[vars]
ALLOWED_ORIGINS = "*"  # 允许的来源，生产环境建议设置具体域名
MAX_FILE_SIZE = "10485760"  # 10MB

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true